<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./fl-draw-style.html">

<script src="../../node_modules/pressure/dist/pressure.min.js"></script>
<script src="../../node_modules/p5/lib/p5.min.js"></script> 
    
<script src="./src/pointstorage.js"></script>
<script src="./src/pointsketch.js" ></script>

<dom-module id="fl-draw">
  <template>
    <style include="fl-draw-style"></style>
    <div id="pane"></div>
  </template>

  <script>
    var pStore ; 
    var pSketch;

    class FlDraw extends Polymer.Element {

      static get is() { return 'fl-draw'; }

      static get properties() {
        return {
          width:  { type: Number, value: 400,    notify: true },
          height: { type: Number, value: 300,    notify: true },
          color:  { type: String, value: "#000000", notify: true },
          flow:   { type: Number, value: 255,    notify: true },
          size:   { type: Number, value: 3,      notify: true }
        };
      }
      
      ready (){
        super.ready();

        let dpane=this.shadowRoot.getElementById('pane');
        dpane.style.width=`${this.width}px`;
        dpane.style.height=`${this.height}px`;

        pStore= PointStorage(this);
        pStore.attachEventHandlers(dpane); 
        pSketch = PointSketch(dpane,this.width,this.height,pStore.points);

      }
    }

    window.customElements.define(FlDraw.is, FlDraw);

  </script>

</dom-module>