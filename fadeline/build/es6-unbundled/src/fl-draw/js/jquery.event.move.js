function viEnvelope(a){var b=a;(function(a){'function'===typeof define&&define.amd?define([],a):'undefined'!==typeof module&&null!==module&&module.exports?module.exports=a:a()})(function(){function a(a){return new CustomEvent(a,O)}function c(a){return a[P]||(a[P]={})}function d(a,b,d,f){function e(a){d(a,f)}b=b.split(N);for(var g,h,j=c(a),k=b.length;k--;)h=b[k],g=j[h]||(j[h]=[]),g.push([d,e]),a.addEventListener(h,e)}function e(a,b,d){b=b.split(N);var e,f,g,h=c(a),j=b.length;if(h)for(;j--;)if(e=b[j],f=h[e],!!f)for(g=f.length;g--;)f[g][0]===d&&(a.removeEventListener(e,f[g][1]),f.splice(g,1))}function f(b,c,d){var e=a(c);d&&H(e,d),b.dispatchEvent(e)}function g(a){function b(){d?(c(),J(b),e=!0,d=!1):e=!1}var c=a,d=!1,e=!1;this.kick=function(){d=!0,e||b()},this.end=function(a){var b=c;a&&(e?(c=d?function(){b(),a()}:a,d=!0):a())}}function h(){}function i(a){a.preventDefault()}function j(a){return!!K[a.target.tagName.toLowerCase()]}function k(a){return 1===a.which&&!a.ctrlKey&&!a.altKey}function l(a,b){var c,d;if(a.identifiedTouch)return a.identifiedTouch(b);for(c=-1,d=a.length;++c<d;)if(a[c].identifier===b)return a[c]}function m(a,b){var c=l(a.changedTouches,b.identifier);return c?c.pageX===b.pageX&&c.pageY===b.pageY?void 0:c:void 0}function n(a,b){t(a,b,a,p)}function o(){p()}function p(){e(b,L.move,n),e(b,L.cancel,o)}function q(a,b){var c=m(a,b);c&&t(a,b,c,s)}function r(a,b){var c=l(a.changedTouches,b.identifier);c&&s(b)}function s(a){e(b,M.move,a.touchmove),e(b,M.cancel,a.touchend)}function t(a,b,c,d){var e=c.pageX-b.pageX,f=c.pageY-b.pageY;e*e+f*f<I*I||u(a,b,c,e,f,d)}function u(a,b,c,d,e,g){var i=a.targetTouches,j=a.timeStamp-b.timeStamp,k={altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,startX:b.pageX,startY:b.pageY,distX:d,distY:e,deltaX:d,deltaY:e,pageX:c.pageX,pageY:c.pageY,velocityX:d/j,velocityY:e/j,identifier:b.identifier,targetTouches:i,finger:i?i.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=h,a.preventDefault()}};f(b.target,'movestart',k),g(b)}function v(a,b){var c=b.timer;b.touch=a,b.timeStamp=a.timeStamp,c.kick()}function w(a,b){var c=b.target,d=b.event,f=b.timer;x(),C(c,d,f,function(){setTimeout(function(){e(c,'click',i)},0)})}function x(){e(b,L.move,v),e(b,L.end,w)}function y(a,b){var c=b.event,d=b.timer,e=m(a,c);e&&(a.preventDefault(),c.targetTouches=a.targetTouches,b.touch=e,b.timeStamp=a.timeStamp,d.kick())}function z(a,b){var c=b.target,d=b.event,e=b.timer,f=l(a.changedTouches,d.identifier);f&&(A(b),C(c,d,e))}function A(a){e(b,M.move,a.activeTouchmove),e(b,M.end,a.activeTouchend)}function B(a,b,c){var d=c-a.timeStamp;a.distX=b.pageX-a.startX,a.distY=b.pageY-a.startY,a.deltaX=b.pageX-a.pageX,a.deltaY=b.pageY-a.pageY,a.velocityX=0.3*a.velocityX+0.7*a.deltaX/d,a.velocityY=0.3*a.velocityY+0.7*a.deltaY/d,a.pageX=b.pageX,a.pageY=b.pageY}function C(a,b,c,d){c.end(function(){return f(a,'moveend',b),d&&d()})}function D(a){a.enableMove()}function E(a){a.enableMove()}function F(a){a.enableMove()}function G(a){var b=a.handler;a.handler=function(a){for(var c,d=Q.length;d--;)c=Q[d],a[c]=a.originalEvent[c];b.apply(this,arguments)}}var H=Object.assign||window.jQuery&&jQuery.extend,I=8,J=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a()},25)}}(),K={textarea:!0,input:!0,select:!0,button:!0},L={move:'mousemove',cancel:'mouseup dragstart',end:'mouseup'},M={move:'touchmove',cancel:'touchend',end:'touchend'},N=/\s+/,O={bubbles:!0,cancelable:!0},P=Symbol('events');if(d(b,'mousedown',function(a){!k(a)||j(a)||(d(b,L.move,n,a),d(b,L.cancel,o,a))}),d(b,'touchstart',function(a){if(!K[a.target.tagName.toLowerCase()]){var c=a.changedTouches[0],e={target:c.target,pageX:c.pageX,pageY:c.pageY,identifier:c.identifier,touchmove:function(a,b){q(a,b)},touchend:function(a,b){r(a,b)}};d(b,M.move,e.touchmove,e),d(b,M.cancel,e.touchend,e)}}),d(b,'movestart',function(a){function c(){B(e,h.touch,h.timeStamp),f(h.target,'move',e)}if(!a.defaultPrevented&&a.moveEnabled){var e={startX:a.startX,startY:a.startY,pageX:a.pageX,pageY:a.pageY,distX:a.distX,distY:a.distY,deltaX:a.deltaX,deltaY:a.deltaY,velocityX:a.velocityX,velocityY:a.velocityY,identifier:a.identifier,targetTouches:a.targetTouches,finger:a.finger},h={target:a.target,event:e,timer:new g(c),touch:void 0,timeStamp:a.timeStamp};void 0===a.identifier?(d(a.target,'click',i),d(b,L.move,v,h),d(b,L.end,w,h)):(h.activeTouchmove=function(a,b){y(a,b)},h.activeTouchend=function(a,b){z(a,b)},d(b,M.move,h.activeTouchmove,h),d(b,M.end,h.activeTouchend,h))}}),!!window.jQuery){var Q=['startX','startY','pageX','pageY','distX','distY','deltaX','deltaY','velocityX','velocityY'];jQuery.event.special.movestart={setup:function(){return d(this,'movestart',D),!1},teardown:function(){return e(this,'movestart',D),!1},add:G},jQuery.event.special.move={setup:function(){return d(this,'movestart',E),!1},teardown:function(){return e(this,'movestart',E),!1},add:G},jQuery.event.special.moveend={setup:function(){return d(this,'movestart',F),!1},teardown:function(){return e(this,'movestart',F),!1},add:G}}})}